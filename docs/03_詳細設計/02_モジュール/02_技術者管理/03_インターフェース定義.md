# 技術者管理モジュール インターフェース定義

## 1. 提供インターフェース

技術者管理モジュールが他のモジュールに提供するインターフェースを定義します。

### 1.1 技術者基本情報サービス (EngineerService)

技術者の基本情報を操作するためのサービスインターフェースです。

```
public interface EngineerService {
    // 技術者情報の取得
    EngineerDTO getEngineer(Long engineerId);
    
    // 技術者情報の登録
    Long registerEngineer(EngineerRegistrationDTO engineer);
    
    // 技術者情報の更新
    void updateEngineer(EngineerUpdateDTO engineer);
    
    // 技術者情報の論理削除
    void deleteEngineer(Long engineerId);
    
    // 指定された条件に基づいて技術者情報のリストを取得
    Page<EngineerSummaryDTO> listEngineers(EngineerFilterDTO filter, Pageable pageable);
    
    // 技術者IDの一覧から技術者情報のリストを取得
    List<EngineerDTO> getEngineersByIds(List<Long> engineerIds);
    
    // 特定の部署に所属する技術者のリストを取得
    List<EngineerSummaryDTO> getEngineersByDepartment(Long departmentId);
}
```

#### データ転送オブジェクト

**EngineerDTO**
```
public class EngineerDTO {
    private Long engineerId;
    private String employeeCode;
    private Long companyId;
    private Long departmentId;
    private String lastName;
    private String firstName;
    private String lastNameKana;
    private String firstNameKana;
    private GenderEnum gender;
    private LocalDate birthDate;
    private String emailAddress;
    private String phoneNumber;
    private AddressDTO address;
    private EmploymentTypeEnum employmentType;
    private EmploymentStatusEnum employmentStatus;
    private LocalDate joinDate;
    private LocalDate leaveDate;
    private Integer yearsOfExperience;
    private JobTypeEnum primaryJobType;
    private MoneyDTO unitPrice;
    private MoneyDTO unitPriceMin;
    private String note;
    private LocalDateTime createdAt;
    private LocalDateTime updatedAt;
    
    // getters and setters
}
```

**EngineerRegistrationDTO**
```
public class EngineerRegistrationDTO {
    private String employeeCode;
    private Long companyId;
    private Long departmentId;
    private String lastName;
    private String firstName;
    private String lastNameKana;
    private String firstNameKana;
    private GenderEnum gender;
    private LocalDate birthDate;
    private String emailAddress;
    private String phoneNumber;
    private AddressDTO address;
    private EmploymentTypeEnum employmentType;
    private EmploymentStatusEnum employmentStatus;
    private LocalDate joinDate;
    private Integer yearsOfExperience;
    private JobTypeEnum primaryJobType;
    private MoneyDTO unitPrice;
    private MoneyDTO unitPriceMin;
    private String note;
    
    // getters and setters
}
```

**EngineerUpdateDTO**
```
public class EngineerUpdateDTO {
    private Long engineerId;
    private Long companyId;
    private Long departmentId;
    private String lastName;
    private String firstName;
    private String lastNameKana;
    private String firstNameKana;
    private GenderEnum gender;
    private LocalDate birthDate;
    private String emailAddress;
    private String phoneNumber;
    private AddressDTO address;
    private EmploymentTypeEnum employmentType;
    private EmploymentStatusEnum employmentStatus;
    private LocalDate joinDate;
    private LocalDate leaveDate;
    private Integer yearsOfExperience;
    private JobTypeEnum primaryJobType;
    private MoneyDTO unitPrice;
    private MoneyDTO unitPriceMin;
    private String note;
    
    // getters and setters
}
```

**EngineerSummaryDTO**
```
public class EngineerSummaryDTO {
    private Long engineerId;
    private String employeeCode;
    private String fullName;
    private String fullNameKana;
    private EmploymentStatusEnum employmentStatus;
    private JobTypeEnum primaryJobType;
    private Integer yearsOfExperience;
    private MoneyDTO unitPrice;
    private AvailabilityTypeEnum currentAvailability;
    
    // getters and setters
}
```

**EngineerFilterDTO**
```
public class EngineerFilterDTO {
    private List<Long> companyIds;
    private List<Long> departmentIds;
    private String nameKeyword;
    private List<EmploymentTypeEnum> employmentTypes;
    private List<EmploymentStatusEnum> employmentStatuses;
    private List<JobTypeEnum> jobTypes;
    private Integer minYearsOfExperience;
    private Integer maxYearsOfExperience;
    private BigDecimal minUnitPrice;
    private BigDecimal maxUnitPrice;
    private List<AvailabilityTypeEnum> availabilityTypes;
    
    // getters and setters
}
```

#### 非機能要件

- **パフォーマンス**：
  - getEngineer()：レスポンスタイム 100ms以内
  - listEngineers()：100件あたり 500ms以内
  - その他メソッド：1秒以内

- **トランザクション**：
  - registerEngineer()、updateEngineer()、deleteEngineer()はトランザクション管理されます
  - 参照系メソッドはトランザクションの読み取り専用として実行されます

- **セキュリティ**：
  - 全メソッドはユーザー認証が必要
  - リソースへのアクセスは認可サービスによる権限チェックあり

- **使用コンテキスト**：
  - 技術者の登録・更新・照会の際に利用
  - マッチング時の技術者情報参照に利用
  - 契約管理時の技術者情報参照に利用

### 1.2 技術者検索サービス (EngineerQueryService)

技術者を高度な条件で検索するためのサービスインターフェースです。

```
public interface EngineerQueryService {
    // スキル条件に基づく技術者検索
    Page<EngineerSummaryDTO> findEngineersBySkills(List<SkillCriteriaDTO> skillCriteria, Pageable pageable);
    
    // 稼働状況条件に基づく技術者検索
    Page<EngineerSummaryDTO> findEngineersByAvailability(AvailabilityCriteriaDTO availabilityCriteria, Pageable pageable);
    
    // 複合条件に基づく高度な技術者検索
    Page<EngineerSummaryDTO> findEngineers(EngineerSearchCriteriaDTO searchCriteria, Pageable pageable);
    
    // キーワードベースの技術者検索
    Page<EngineerSummaryDTO> searchEngineersByKeyword(String keyword, Pageable pageable);
    
    // 検索条件の保存
    Long saveSearchCriteria(SavedSearchDTO savedSearch);
    
    // 保存済み検索条件のロード
    SavedSearchDTO getSavedSearch(Long savedSearchId);
    
    // ユーザーの保存済み検索条件一覧の取得
    List<SavedSearchSummaryDTO> listSavedSearches(Long userId);
}
```

#### データ転送オブジェクト

**SkillCriteriaDTO**
```
public class SkillCriteriaDTO {
    private Long skillDefinitionId;
    private Integer minimumLevel;
    private Integer minimumExperience;
    private Boolean isRequired;
    
    // getters and setters
}
```

**AvailabilityCriteriaDTO**
```
public class AvailabilityCriteriaDTO {
    private AvailabilityTypeEnum availabilityType;
    private LocalDate startDate;
    private LocalDate endDate;
    private Integer minimumWorkRate;
    private List<String> locationPreferences;
    
    // getters and setters
}
```

**EngineerSearchCriteriaDTO**
```
public class EngineerSearchCriteriaDTO {
    private EngineerFilterDTO basicFilter;
    private List<SkillCriteriaDTO> skillCriteria;
    private AvailabilityCriteriaDTO availabilityCriteria;
    private List<Long> certificationTypeIds;
    private Boolean hasWorkHistory;
    private Integer minProjectExperience;
    
    // getters and setters
}
```

**SavedSearchDTO**
```
public class SavedSearchDTO {
    private Long savedSearchId;
    private String searchName;
    private String description;
    private Long userId;
    private EngineerSearchCriteriaDTO searchCriteria;
    private Boolean isPublic;
    private LocalDateTime createdAt;
    
    // getters and setters
}
```

**SavedSearchSummaryDTO**
```
public class SavedSearchSummaryDTO {
    private Long savedSearchId;
    private String searchName;
    private String description;
    private Boolean isPublic;
    private LocalDateTime createdAt;
    private LocalDateTime lastUsedAt;
    
    // getters and setters
}
```

#### 非機能要件

- **パフォーマンス**：
  - 検索メソッド：複雑な検索条件でも3秒以内
  - 保存済み検索関連：1秒以内

- **キャッシング**：
  - 頻繁に使用される検索結果やマスタデータはキャッシュされます
  - キャッシュの有効期間：マスタデータは1時間、検索結果は30分

- **セキュリティ**：
  - 全メソッドはユーザー認証が必要
  - 保存済み検索条件は作成者のみが編集可能
  - 公開フラグが付いた検索条件のみ他ユーザーが閲覧可能

### 1.3 スキル管理サービス (SkillManagementService)

技術者のスキル情報を管理するためのサービスインターフェースです。

```
public interface SkillManagementService {
    // 技術者のスキル一覧取得
    List<EngineerSkillDTO> getEngineerSkills(Long engineerId);
    
    // スキルのカテゴリ別取得
    Map<String, List<EngineerSkillDTO>> getEngineerSkillsByCategory(Long engineerId);
    
    // スキル追加
    Long addEngineerSkill(EngineerSkillRegistrationDTO skill);
    
    // スキル更新
    void updateEngineerSkill(EngineerSkillUpdateDTO skill);
    
    // スキル削除
    void deleteEngineerSkill(Long engineerSkillId);
    
    // 複数スキル一括更新
    void bulkUpdateEngineerSkills(Long engineerId, List<EngineerSkillUpdateDTO> skills);
    
    // スキル検証
    void verifyEngineerSkill(Long engineerSkillId, SkillVerificationDTO verification);
    
    // スキル定義一覧取得
    List<SkillDefinitionDTO> getSkillDefinitions();
    
    // カテゴリ別スキル定義取得
    Map<String, List<SkillDefinitionDTO>> getSkillDefinitionsByCategory();
    
    // 特定カテゴリのスキル定義取得
    List<SkillDefinitionDTO> getSkillDefinitionsByCategory(Long categoryId);
}
```

#### データ転送オブジェクト

**EngineerSkillDTO**
```
public class EngineerSkillDTO {
    private Long engineerSkillId;
    private Long engineerId;
    private Long skillDefinitionId;
    private String skillName;
    private String categoryName;
    private Integer skillLevel;
    private Integer experienceMonths;
    private Boolean isVerified;
    private Long verifiedBy;
    private LocalDateTime verifiedAt;
    private String note;
    
    // getters and setters
}
```

**EngineerSkillRegistrationDTO**
```
public class EngineerSkillRegistrationDTO {
    private Long engineerId;
    private Long skillDefinitionId;
    private Integer skillLevel;
    private Integer experienceMonths;
    private String note;
    
    // getters and setters
}
```

**EngineerSkillUpdateDTO**
```
public class EngineerSkillUpdateDTO {
    private Long engineerSkillId;
    private Integer skillLevel;
    private Integer experienceMonths;
    private String note;
    
    // getters and setters
}
```

**SkillVerificationDTO**
```
public class SkillVerificationDTO {
    private Long engineerSkillId;
    private Boolean isVerified;
    private String verificationNote;
    
    // getters and setters
}
```

**SkillDefinitionDTO**
```
public class SkillDefinitionDTO {
    private Long skillDefinitionId;
    private String skillCode;
    private String skillName;
    private Long skillCategoryId;
    private String categoryName;
    private String description;
    private String evalCriteria;
    private Boolean isActive;
    
    // getters and setters
}
```

#### 非機能要件

- **パフォーマンス**：
  - スキル取得系：500ms以内
  - スキル更新系：1秒以内
  - スキル定義取得系：300ms以内

- **トランザクション**：
  - 更新系メソッドはすべてトランザクション管理されます
  - bulkUpdateEngineerSkills()は単一トランザクションで処理され、一部でも失敗した場合はロールバックされます

- **セキュリティ**：
  - 全メソッドはユーザー認証が必要
  - スキル検証は検証権限を持つユーザーのみ実行可能

### 1.4 稼働状況管理サービス (AvailabilityService)

技術者の稼働状況を管理するためのサービスインターフェースです。

```
public interface AvailabilityService {
    // 技術者の現在の稼働状況取得
    EngineerAvailabilityDTO getCurrentAvailability(Long engineerId);
    
    // 技術者の特定期間の稼働状況履歴取得
    List<EngineerAvailabilityDTO> getAvailabilityHistory(Long engineerId, LocalDate from, LocalDate to);
    
    // 稼働状況の更新
    Long updateAvailability(EngineerAvailabilityUpdateDTO availability);
    
    // 稼働予定の追加
    Long addPlannedAvailability(EngineerAvailabilityRegistrationDTO plannedAvailability);
    
    // 稼働状況の削除
    void deleteAvailability(Long availabilityId);
    
    // 特定の稼働状況の技術者一覧取得
    List<EngineerAvailabilitySummaryDTO> getEngineersByAvailabilityType(
            AvailabilityTypeEnum availabilityType, LocalDate referenceDate);
    
    // 案件に紐づく技術者の稼働状況一覧取得
    List<EngineerAvailabilitySummaryDTO> getAvailabilitiesByProject(Long projectId);
    
    // 部署別稼働状況サマリー取得
    List<DepartmentUtilizationDTO> getDepartmentUtilization(LocalDate referenceDate);
    
    // 技術者の稼働率計算（指定期間）
    UtilizationRateDTO calculateUtilizationRate(Long engineerId, LocalDate from, LocalDate to);
}
```

#### データ転送オブジェクト

**EngineerAvailabilityDTO**
```
public class EngineerAvailabilityDTO {
    private Long availabilityId;
    private Long engineerId;
    private String engineerName;
    private AvailabilityTypeEnum availabilityType;
    private Long projectId;
    private String projectName;
    private LocalDate startDate;
    private LocalDate endDate;
    private Integer workRate;
    private String location;
    private String note;
    private LocalDateTime createdAt;
    private LocalDateTime updatedAt;
    
    // getters and setters
}
```

**EngineerAvailabilityUpdateDTO**
```
public class EngineerAvailabilityUpdateDTO {
    private Long availabilityId;
    private AvailabilityTypeEnum availabilityType;
    private Long projectId;
    private LocalDate startDate;
    private LocalDate endDate;
    private Integer workRate;
    private String location;
    private String note;
    
    // getters and setters
}
```

**EngineerAvailabilityRegistrationDTO**
```
public class EngineerAvailabilityRegistrationDTO {
    private Long engineerId;
    private AvailabilityTypeEnum availabilityType;
    private Long projectId;
    private LocalDate startDate;
    private LocalDate endDate;
    private Integer workRate;
    private String location;
    private String note;
    
    // getters and setters
}
```

**EngineerAvailabilitySummaryDTO**
```
public class EngineerAvailabilitySummaryDTO {
    private Long engineerId;
    private String engineerName;
    private String employeeCode;
    private Long departmentId;
    private String departmentName;
    private AvailabilityTypeEnum availabilityType;
    private Long projectId;
    private String projectName;
    private LocalDate startDate;
    private LocalDate endDate;
    private Integer workRate;
    
    // getters and setters
}
```

**DepartmentUtilizationDTO**
```
public class DepartmentUtilizationDTO {
    private Long departmentId;
    private String departmentName;
    private Integer totalEngineers;
    private Integer assignedEngineers;
    private Integer waitingEngineers;
    private Integer trainingEngineers;
    private Integer otherEngineers;
    private Double utilizationRate;
    
    // getters and setters
}
```

**UtilizationRateDTO**
```
public class UtilizationRateDTO {
    private Long engineerId;
    private String engineerName;
    private LocalDate periodStart;
    private LocalDate periodEnd;
    private Integer totalDays;
    private Integer assignedDays;
    private Integer waitingDays;
    private Integer trainingDays;
    private Integer otherDays;
    private Double utilizationRate;
    
    // getters and setters
}
```

#### 非機能要件

- **パフォーマンス**：
  - 個別稼働状況取得：300ms以内
  - 稼働状況リスト取得：1秒以内
  - 統計情報（稼働率等）計算：3秒以内

- **トランザクション**：
  - 更新系メソッドはすべてトランザクション管理されます
  - 稼働状況の更新は整合性チェック（期間の重複等）を含みます

- **セキュリティ**：
  - 全メソッドはユーザー認証が必要
  - 稼働状況の更新は権限を持つユーザーのみ実行可能

- **通知**：
  - 稼働状況の更新時には関連部署やプロジェクト関係者に通知が送信されます

### 1.5 スキルシート管理サービス (SkillSheetService)

技術者のスキルシートを管理するためのサービスインターフェースです。

```
public interface SkillSheetService {
    // スキルシート取得
    SkillSheetDTO getSkillSheet(Long skillSheetId);
    
    // 技術者の最新スキルシート取得
    SkillSheetDTO getLatestSkillSheet(Long engineerId);
    
    // 技術者のスキルシート履歴取得
    List<SkillSheetSummaryDTO> getSkillSheetHistory(Long engineerId);
    
    // スキルシートの生成
    Long generateSkillSheet(SkillSheetGenerationDTO request);
    
    // スキルシートの更新
    void updateSkillSheet(SkillSheetUpdateDTO request);
    
    // スキルシートの承認依頼
    void requestApproval(Long skillSheetId, ApprovalRequestDTO request);
    
    // スキルシートの承認/却下
    void processApproval(Long skillSheetId, ApprovalResultDTO result);
    
    // スキルシートのエクスポート（PDF）
    byte[] exportSkillSheetToPdf(Long skillSheetId);
    
    // スキルシートのエクスポート（Word）
    byte[] exportSkillSheetToWord(Long skillSheetId);
    
    // スキルシートテンプレート一覧取得
    List<SkillSheetTemplateDTO> getSkillSheetTemplates();
    
    // 閲覧用スキルシートの共有リンク生成
    String generateSharingLink(Long skillSheetId, SharingOptionsDTO options);
}
```

#### データ転送オブジェクト

**SkillSheetDTO**
```
public class SkillSheetDTO {
    private Long skillSheetId;
    private Long engineerId;
    private String engineerName;
    private Long templateId;
    private String templateName;
    private Integer version;
    private String title;
    private String content;
    private Long fileId;
    private Boolean isPublic;
    private ApprovalStatusEnum approvalStatus;
    private Long approvedBy;
    private String approverName;
    private LocalDateTime approvedAt;
    private LocalDateTime createdAt;
    private LocalDateTime updatedAt;
    
    // getters and setters
}
```

**SkillSheetSummaryDTO**
```
public class SkillSheetSummaryDTO {
    private Long skillSheetId;
    private Integer version;
    private String title;
    private ApprovalStatusEnum approvalStatus;
    private LocalDateTime createdAt;
    private LocalDateTime updatedAt;
    
    // getters and setters
}
```

**SkillSheetGenerationDTO**
```
public class SkillSheetGenerationDTO {
    private Long engineerId;
    private Long templateId;
    private String title;
    private List<WorkHistorySelectionDTO> selectedWorkHistory;
    private List<SkillSelectionDTO> selectedSkills;
    private String additionalNote;
    
    // getters and setters
}
```

**SkillSheetUpdateDTO**
```
public class SkillSheetUpdateDTO {
    private Long skillSheetId;
    private String title;
    private String content;
    private Boolean isPublic;
    
    // getters and setters
}
```

**ApprovalRequestDTO**
```
public class ApprovalRequestDTO {
    private Long approverId;
    private String requestNote;
    private LocalDate requestDeadline;
    
    // getters and setters
}
```

**ApprovalResultDTO**
```
public class ApprovalResultDTO {
    private Boolean isApproved;
    private String approvalNote;
    
    // getters and setters
}
```

**SkillSheetTemplateDTO**
```
public class SkillSheetTemplateDTO {
    private Long templateId;
    private String templateName;
    private String description;
    private String format;
    private Boolean isDefault;
    
    // getters and setters
}
```

**SharingOptionsDTO**
```
public class SharingOptionsDTO {
    private Integer expirationDays;
    private Boolean allowDownload;
    private Boolean maskPersonalInfo;
    
    // getters and setters
}
```

**WorkHistorySelectionDTO**
```
public class WorkHistorySelectionDTO {
    private Long workHistoryId;
    private Boolean isSelected;
    private Integer displayOrder;
    
    // getters and setters
}
```

**SkillSelectionDTO**
```
public class SkillSelectionDTO {
    private Long skillId;
    private Boolean isSelected;
    private Integer displayOrder;
    
    // getters and setters
}
```

#### 非機能要件

- **パフォーマンス**：
  - スキルシート取得：500ms以内
  - スキルシート生成：5秒以内
  - PDF/Wordエクスポート：10秒以内

- **トランザクション**：
  - 更新系メソッドはすべてトランザクション管理されます
  - スキルシート生成時には複数のデータソースからの情報収集と整合性チェックが行われます

- **セキュリティ**：
  - 全メソッドはユーザー認証が必要
  - スキルシートの承認は承認権限を持つユーザーのみ実行可能
  - 共有リンクは有効期限と閲覧制約を設定可能

- **ストレージ**：
  - スキルシートのコンテンツはHTML形式で保存
  - エクスポートファイルは一時的にストレージに保存され、ダウンロード後に自動削除

## 2. 要求インターフェース

技術者管理モジュールが他のモジュールに要求するインターフェースを定義します。

### 2.1 認証サービス (AuthenticationService)

ユーザー認証を行うためのインターフェースです。共通機能モジュールから提供されます。

```
public interface AuthenticationService {
    // ユーザー認証情報の検証
    AuthenticationResult authenticate(String token);
    
    // 認証情報のリフレッシュ
    String refreshToken(String refreshToken);
}
```

### 2.2 認可サービス (AuthorizationService)

ユーザー権限管理を行うためのインターフェースです。共通機能モジュールから提供されます。

```
public interface AuthorizationService {
    // リソースへのアクセス権限チェック
    boolean hasPermission(Long userId, String resource, String action);
    
    // ロールの取得
    List<String> getUserRoles(Long userId);
}
```

### 2.3 ファイルストレージサービス (FileStorageService)

ファイルの保存と取得を行うためのインターフェースです。共通機能モジュールから提供されます。

```
public interface FileStorageService {
    // ファイルの保存
    Long saveFile(FileUploadDTO fileUpload);
    
    // ファイルの取得
    FileDownloadDTO getFile(Long fileId);
    
    // ファイルの削除
    void deleteFile(Long fileId);
}
```

### 2.4 通知サービス (NotificationService)

ユーザーへの通知を行うためのインターフェースです。共通機能モジュールから提供されます。

```
public interface NotificationService {
    // 通知の送信
    void sendNotification(NotificationDTO notification);
    
    // メールの送信
    void sendEmail(EmailDTO email);
}
```

### 2.5 コード値管理サービス (CodeValueService)

コード値の管理を行うためのインターフェースです。共通機能モジュールから提供されます。

```
public interface CodeValueService {
    // コード値一覧の取得
    List<CodeValueDTO> getCodeValues(String categoryCode);
    
    // コード値の詳細取得
    CodeValueDTO getCodeValue(String categoryCode, String codeValue);
}
```

### 2.6 ロギングサービス (LoggingService)

操作ログと監査ログを記録するためのインターフェースです。共通機能モジュールから提供されます。

```
public interface LoggingService {
    // 操作ログの記録
    void logOperation(OperationLogDTO log);
    
    // 監査ログの記録
    void logAudit(AuditLogDTO log);
}
```

## 3. イベント定義

技術者管理モジュールが発行および購読するイベントを定義します。

### 3.1 発行イベント

#### 技術者登録イベント (EngineerRegisteredEvent)
```
public class EngineerRegisteredEvent {
    private Long engineerId;
    private String employeeCode;
    private String engineerName;
    private Long departmentId;
    private LocalDateTime registeredAt;
    
    // getters and setters
}
```

#### 技術者更新イベント (EngineerUpdatedEvent)
```
public class EngineerUpdatedEvent {
    private Long engineerId;
    private Set<String> updatedFields;
    private LocalDateTime updatedAt;
    
    // getters and setters
}
```

#### スキル更新イベント (EngineerSkillsUpdatedEvent)
```
public class EngineerSkillsUpdatedEvent {
    private Long engineerId;
    private Set<Long> updatedSkillIds;
    private LocalDateTime updatedAt;
    
    // getters and setters
}
```

#### 稼働状況変更イベント (AvailabilityChangedEvent)
```
public class AvailabilityChangedEvent {
    private Long engineerId;
    private AvailabilityTypeEnum previousType;
    private AvailabilityTypeEnum newType;
    private Long projectId;  // 案件アサイン時のみ
    private LocalDate effectiveDate;
    private LocalDateTime updatedAt;
    
    // getters and setters
}
```

#### スキルシート承認イベント (SkillSheetApprovedEvent)
```
public class SkillSheetApprovedEvent {
    private Long skillSheetId;
    private Long engineerId;
    private Long approverId;
    private LocalDateTime approvedAt;
    
    // getters and setters
}
```

### 3.2 購読イベント

#### 案件登録イベント (ProjectRegisteredEvent)
```
public class ProjectRegisteredEvent {
    private Long projectId;
    private String projectName;
    private LocalDate startDate;
    private LocalDate endDate;
    private LocalDateTime registeredAt;
    
    // getters and setters
}
```

#### 案件状態変更イベント (ProjectStatusChangedEvent)
```
public class ProjectStatusChangedEvent {
    private Long projectId;
    private String previousStatus;
    private String newStatus;
    private LocalDateTime updatedAt;
    
    // getters and setters
}
```

#### マッチング成立イベント (MatchingConfirmedEvent)
```
public class MatchingConfirmedEvent {
    private Long matchingId;
    private Long engineerId;
    private Long projectId;
    private LocalDate startDate;
    private LocalDate endDate;
    private LocalDateTime confirmedAt;
    
    // getters and setters
}
```

## 4. 非機能要件

技術者管理モジュール全体に関する非機能要件を定義します。

### 4.1 パフォーマンス要件

- API応答時間：
  - 参照系API: 平均応答時間 500ms以内
  - 更新系API: 平均応答時間 1秒以内
  - 一括処理API: 平均応答時間 3秒以内
  - 検索API: 平均応答時間 3秒以内（複雑な条件でも）

- スケーラビリティ:
  - 同時アクセスユーザー数: 最大100ユーザー
  - 技術者データ件数: 最大10,000件
  - スキルデータ件数: 最大200,000件（技術者×スキル）
  - スキルシート件数: 最大50,000件

### 4.2 可用性要件

- 稼働時間: 24時間365日
- 計画メンテナンス時間: 月1回、深夜2時間以内
- 目標稼働率: 99.9%
- 障害復旧時間（RTO）: 2時間以内
- データ復旧時点（RPO）: 5分以内

### 4.3 セキュリティ要件

- 認証: すべてのAPIアクセスでJWTによるトークン認証を実施
- 認可: リソースへのアクセスは権限ベースのアクセス制御（RBAC）により制限
- 監査: 重要なデータ操作はすべて監査ログに記録
- データ保護:
  - 個人情報は保存時に暗号化
  - 特定の個人情報へのアクセスは権限を厳格に制限
  - スキルシート共有時の個人情報マスキングオプション

### 4.4 耐障害性

- 一時的なネットワーク障害に対して自動リトライ機能を実装
- 外部サービス障害時のフォールバック動作を定義
- 重要な操作（スキルシート生成、稼働状況更新等）のタイムアウト処理と再実行メカニズム

### 4.5 トランザクション

- 更新系操作はすべてACID属性を持つトランザクションで管理
- 複数リソースにまたがる操作はサガパターンもしくは分散トランザクションで整合性を確保
- 楽観的ロックによる同時更新競合の検出と解決

### 4.6 キャッシング

- マスタデータ（スキル定義、コード値等）はアプリケーションキャッシュで高速化
- キャッシュの有効期間: 
  - スキル定義: 60分
  - コード値: 60分
  - 技術者基本情報: 10分
  - 検索結果: 5分

### 4.7 監視

- API応答時間の監視とアラート設定
- エラー率の監視とアラート設定
- リソース使用率（CPU、メモリ、ディスク）の監視
- バッチ処理の完了状態監視

### 4.8 バックアップ

- 日次フルバックアップ
- 差分バックアップ（1時間ごと）
- トランザクションログのバックアップ（5分ごと）
- バックアップデータのオフサイト保管