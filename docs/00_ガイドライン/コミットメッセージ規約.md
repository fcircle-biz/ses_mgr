# コミットメッセージ規約

このドキュメントは、SES管理システムの開発におけるGitコミットメッセージの標準とベストプラクティスを定義します。一貫したコミットメッセージは、コードの変更履歴を追跡し理解する上で重要な役割を果たします。

## 目次

1. [コミットメッセージの形式](#1-コミットメッセージの形式)
2. [コミットメッセージのプレフィックス](#2-コミットメッセージのプレフィックス)
3. [本文の記述ガイドライン](#3-本文の記述ガイドライン)
4. [日本語と英語の使い分け](#4-日本語と英語の使い分け)
5. [コミットサイズと頻度](#5-コミットサイズと頻度)
6. [チェックリスト](#6-チェックリスト)
7. [コミットメッセージの例](#7-コミットメッセージの例)

## 1. コミットメッセージの形式

コミットメッセージは以下の形式に従って記述します：

```
<プレフィックス>: <タイトル>

<本文>

<フッター>
```

- **プレフィックス**: 変更の種類を示す短い識別子（次のセクションで詳細を説明）
- **タイトル**: 変更内容の簡潔な概要（50文字以内）
- **本文**: 変更の詳細な説明（オプション、72文字で改行）
- **フッター**: 関連する課題番号など（オプション）

## 2. コミットメッセージのプレフィックス

コミットメッセージのプレフィックスは変更の種類を示し、以下のいずれかを使用します：

- **feat**: 新機能の追加
- **fix**: バグ修正
- **docs**: ドキュメントのみの変更
- **style**: コードの意味に影響を与えない変更（フォーマット等）
- **refactor**: バグ修正や機能追加を伴わないコードの変更
- **perf**: パフォーマンス改善のための変更
- **test**: テストの追加・修正
- **chore**: ビルドプロセスやツールの変更、ライブラリの更新など
- **ci**: CI設定ファイルの変更
- **config**: 設定ファイルの変更

これらのプレフィックスは英語で記述し、コロン（:）の後にスペースを入れます。

## 3. 本文の記述ガイドライン

コミットメッセージの本文は以下のガイドラインに従って記述します：

- **タイトル**
  - 変更内容を簡潔に説明する（50文字以内）
  - 命令形（原形＋目的語）で記述する
  - 最初の文字は（英語の場合）大文字で始める
  - 末尾にピリオドを付けない

- **本文** （変更が複雑な場合）
  - タイトルとの間に空行を入れる
  - 変更の理由や背景を説明する
  - 72文字で改行する
  - 箇条書きで記述する場合は「*」または「-」を使用

- **フッター** （関連情報がある場合）
  - 本文との間に空行を入れる
  - 関連する課題番号を記述（例：`refs #123`、`fixes #456`）
  - 破壊的変更がある場合は `BREAKING CHANGE:` を明記

## 4. 日本語と英語の使い分け

コミットメッセージでは、以下のように日本語と英語を使い分けます：

- **プレフィックス**: 必ず英語を使用（feat, fix, docs など）
- **タイトルと本文**: チームの方針に合わせて選択（本プロジェクトでは**日本語**を推奨）

日本語を使用する場合の注意点：
- 文末の「。」は省略可能
- 専門用語やコード要素は英語のままで構いません
- 一貫性を保つよう心がける

英語を使用する場合の注意点：
- 現在形の命令文で記述（Add, Fix, Updateなど）
- 文法的に正しい英語を使用する
- 略語や専門用語は初出時に説明を加える

## 5. コミットサイズと頻度

効果的なバージョン管理のために、コミットサイズと頻度に関するガイドラインを以下に示します：

- **小さく頻繁なコミット**
  - 1つの論理的な変更ごとにコミットする
  - 異なる種類の変更（機能追加とリファクタリングなど）は分けてコミットする
  - 理想的なコミットは、単一の目的を持ち、数十〜数百行の変更に留める

- **関連する変更のグループ化**
  - バグ修正など、複数のファイルにまたがる関連する変更は1つのコミットにまとめる
  - 単一のコミットでコードが動作する状態を保つ（テストが通ることを確認）

- **コミットのタイミング**
  - 作業の論理的な区切りごとにコミットする
  - 長時間の作業は複数の小さなコミットに分割する
  - 日々の作業終了前にはコミットする（未コミットのまま作業を終了しない）

## 6. チェックリスト

コミットメッセージを作成する際は、以下のチェックリストを使用して品質を確保します：

- [ ] 適切なプレフィックスを選択しているか
- [ ] タイトルは50文字以内で簡潔に記述されているか
- [ ] タイトルは「何をしたか」ではなく「何をするか」の形式か
- [ ] 複雑な変更の場合、本文で詳細に説明されているか
- [ ] 関連する課題がある場合、課題番号が記載されているか
- [ ] 破壊的変更がある場合、明示されているか
- [ ] 不要なファイル（ログ、一時ファイルなど）がコミットに含まれていないか

## 7. コミットメッセージの例

### 良い例

```
feat: 技術者スキル検索機能の実装

- スキルタグによる技術者検索機能を追加
- スキルレベルによるフィルタリング機能を実装
- 検索結果の並べ替え機能を追加

refs #123
```

```
fix: 請求書PDFのフォント文字化けを修正

日本語フォントがPDF生成時に文字化けする問題を修正。
フォント設定をMS明朝からNoto Sans JPに変更。

fixes #456
```

```
refactor: 案件管理サービスのメソッド分割

案件管理サービスの肥大化したメソッドを複数の小さなメソッドに分割し、
可読性と保守性を向上。変更前と同じ機能を維持。
```

```
docs: READMEに開発環境構築手順を追加

新規開発者向けに環境構築の手順を詳細に記述。
Docker環境とローカル環境の両方のセットアップ方法を記載。
```

### 悪い例

```
コードの修正
```
（問題点: プレフィックスがなく、変更内容が不明確）

```
feat: いろいろな機能を追加
```
（問題点: 変更内容が不明確で具体性がない）

```
fix: バグ修正
```
（問題点: どのバグを修正したのか情報がない）

```
style, refactor, feat: UIデザイン変更、コードリファクタリング、新機能追加
```
（問題点: 複数の種類の変更が混在している。これらは別々のコミットにすべき）

このガイドラインに従ってコミットメッセージを作成することで、プロジェクトの変更履歴が理解しやすくなり、開発チーム全体の効率が向上します。