# モバイル対応レスポンシブデザインガイドライン

## 1. 概要

本ガイドラインは、SES管理システムのUIをモバイルフレンドリーかつレスポンシブな設計にするための原則と実践方法を定義します。デスクトップだけでなくタブレットやスマートフォンでの使いやすさを確保し、一貫性のあるユーザー体験を提供することを目的としています。

### 1.1 目的

- モバイルファーストの設計アプローチを確立する
- 異なるデバイスサイズでの一貫した使いやすさを確保する
- パフォーマンスを最適化し、軽量なUI体験を実現する
- アクセシビリティ基準に準拠したモバイルUIを設計する

### 1.2 対象デバイス

| デバイスタイプ | 画面幅    | 特性                           |
|------------|--------|------------------------------|
| モバイル      | 〜767px | タッチ操作中心、単一カラムレイアウト優先        |
| タブレット     | 768px〜1199px | タッチ操作、限定的なマルチカラムレイアウト     |
| デスクトップ    | 1200px〜 | マウス・キーボード操作、フルサイズのレイアウト   |

## 2. モバイルファースト設計原則

### 2.1 コンテンツの優先順位付け

1. **コア機能の特定**
   - 各画面の主要タスクを明確にし、モバイル画面でも最初に表示する
   - 二次的な機能や補足情報は省略または折りたたみ可能にする

2. **進行型拡張（Progressive Enhancement）**
   - 最小限の画面サイズで完全に機能するUIを最初に設計
   - 画面サイズに応じて段階的に機能や表示要素を追加

3. **コンテキスト認識**
   - モバイルユーザーの特有のニーズと文脈を考慮（外出先での素早い情報確認など）
   - タスク完了に必要なステップを最小限に抑える

### 2.2 レイアウト設計

1. **フレキシブルグリッド**
   - Bootstrap 5のグリッドシステムを活用（12カラム）
   - 以下のクラス命名規則を一貫して使用:
     - `.col-*` - すべてのデバイスサイズ
     - `.col-sm-*` - 576px以上
     - `.col-md-*` - 768px以上
     - `.col-lg-*` - 992px以上
     - `.col-xl-*` - 1200px以上

2. **ビューポート設定**
   ```html
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   ```

3. **フレキシブルコンテナ**
   - `.container-fluid` - フル幅コンテナ（すべてのデバイスに対応）
   - `.container` - レスポンシブ固定幅コンテナ（デバイスサイズに応じた最大幅）

4. **スタック表示への変換**
   - デスクトップで複数カラムのコンテンツは、モバイルで単一カラムへ自動変換
   - 例: `<div class="row"><div class="col-md-6 col-12">...</div><div class="col-md-6 col-12">...</div></div>`

## 3. タッチ操作の最適化

### 3.1 タッチターゲットのサイズ

1. **最小タッチエリア**
   - ボタン、リンク、入力要素の最小サイズ: 44×44px
   - アイコンボタンの最小サイズ: 44×44px（アイコン自体は24×24px）

2. **ターゲット間の間隔**
   - タッチ要素間の最小間隔: 8px
   - 頻繁に使用される操作間の推奨間隔: 12px以上

### 3.2 ジェスチャー対応

1. **基本ジェスチャー**
   - タップ: プライマリアクション（ボタン押下、リンク選択）
   - スワイプ: リスト項目の追加アクション表示、次/前のアイテムに移動
   - プル: リストの更新（pull-to-refresh）

2. **ジェスチャーフィードバック**
   - タップ時の視覚的フィードバック（色変更、アニメーション）
   - スワイプアクションの視覚的インジケーター
   - タッチ操作のステータス表示（ローディングインジケーターなど）

### 3.3 フォーム操作

1. **フォーム要素の最適化**
   - ラベルとフィールドの十分な大きさと間隔
   - モバイルに適したHTML5入力タイプ（type="tel", type="email", type="date"等）
   - モバイルキーボードを考慮した入力フィールド配置

2. **フォームアクション**
   - 送信ボタンを画面下部の簡単に押せる位置に配置
   - フォームの自動バリデーションとエラー表示
   - 複雑なフォームの段階的表示（ステップ分割）

## 4. モバイル向け特殊UIパターン

### 4.1 ナビゲーション

1. **ハンバーガーメニュー**
   - 画面上部にハンバーガーアイコン配置
   - タップでオフキャンバスメニュー表示
   ```html
   <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
     <span class="navbar-toggler-icon"></span>
   </button>
   ```

2. **ボトムナビゲーション**
   - モバイル画面での主要機能に素早くアクセスするためのパターン
   - 最大5つの主要アイクションに制限
   - 常に画面最下部に固定表示

3. **ブレッドクラム**
   - 省略型のブレッドクラムを使用（中間階層を省略）
   - タッチしやすいサイズと間隔で設計

### 4.2 データ表示

1. **レスポンシブテーブル**
   - Bootstrap 5の`.table-responsive`クラスを使用
   - 複雑なテーブルはカード形式に変換
   - 横スクロール可能なテーブルには視覚的インジケーターを表示

2. **リスト表示の最適化**
   - リスト項目は十分なタッチ領域（最低高さ44px）
   - アクションボタンは右側に配置
   - スワイプアクションで二次操作を表示

3. **モーダル・ダイアログ**
   - モバイルではフルスクリーンか画面下部からのシート表示
   - 閉じるボタンは十分な大きさと視認性を確保
   - スワイプダウンで閉じる機能の実装

## 5. パフォーマンス最適化

### 5.1 画像最適化

1. **レスポンシブ画像**
   - HTML5の`<picture>`要素と`srcset`属性を活用
   - 画像形式の最適化（WebP形式の使用）
   - 適切な画像圧縮（品質と容量のバランス）

2. **遅延読み込み**
   - 画像の遅延読み込み属性の使用
   ```html
   <img src="image.jpg" loading="lazy" alt="説明">
   ```

### 5.2 レンダリング最適化

1. **クリティカルCSSの利用**
   - ページ読み込み時に必要な最小限のCSSを初期表示用に分離
   - 非クリティカルなCSSは遅延読み込み

2. **アセット最小化**
   - JavaScriptとCSSファイルの最小化
   - 必要な場合のみJavaScriptを読み込み
   - コンポーネントの遅延読み込み

### 5.3 オフライン対応

1. **基本的なオフライン表示**
   - キャッシュ戦略の実装
   - オフライン時の適切なフィードバック表示
   - 重要な機能のオフライン対応検討

## 6. 実装ガイドライン

### 6.1 使用すべきBootstrapクラス

| 目的 | 推奨クラス | 説明 |
|-----|----------|-----|
| レスポンシブコンテナ | `.container-fluid`, `.container` | 画面幅に応じたコンテナ |
| レスポンシブグリッド | `.row`, `.col-*`, `.col-md-*` | フレキシブルなグリッドレイアウト |
| 表示制御 | `.d-none`, `.d-md-block` | 特定の画面サイズでの表示/非表示 |
| マージン/パディング | `.m-*`, `.p-*` | サイズに応じた余白設定 |
| テキストサイズ | `.fs-*` | レスポンシブなフォントサイズ |
| テキスト整列 | `.text-center`, `.text-md-start` | 画面サイズに応じたテキスト配置 |

### 6.2 実装チェックリスト

- [ ] すべての画面をモバイルファーストで設計（最小幅375pxから開始）
- [ ] すべてのインタラクティブ要素が最小タッチサイズ（44×44px）を満たす
- [ ] タブレット（768px-1199px）とデスクトップ（1200px以上）で適切に拡張表示
- [ ] フォームはモバイルでの入力に最適化されている
- [ ] 画像と動的コンテンツは最適化され、遅延読み込みを実装
- [ ] すべての主要機能はモバイルで利用可能
- [ ] 複雑なデータテーブルはモバイルでも利用可能（代替表示あり）
- [ ] キーボード操作とスクリーンリーダーでも操作可能
- [ ] Lighthouse（モバイル）でパフォーマンススコア80以上を達成

## 7. テスト方法

### 7.1 デバイステスト

1. **実機テスト**
   - iPhone（最新モデルと旧モデル）
   - Android（複数の画面サイズと解像度）
   - タブレット（iPad, Android）
   - デスクトップ（異なる解像度）

2. **ブラウザテスト**
   - Safari（iOS）
   - Chrome（Android, デスクトップ）
   - Firefox（デスクトップ）
   - Edge（デスクトップ）

### 7.2 エミュレーションとツール

1. **開発ツール**
   - Chrome DevToolsのレスポンシブモード
   - Firefox Responsive Design Mode
   - Safari Developer Tools

2. **自動化テスト**
   - Lighthouse（モバイルモード）
   - WebPageTest
   - BrowserStack

## 8. 参考リソース

- [Bootstrap 5 ドキュメント](https://getbootstrap.jp/docs/5.0/getting-started/introduction/)
- [WCAG 2.1 モバイルアクセシビリティガイドライン](https://www.w3.org/TR/mobile-accessibility-mapping/)
- [Material Design - レスポンシブレイアウトグリッド](https://material.io/design/layout/responsive-layout-grid.html)
- [モバイルファースト設計原則](https://developers.google.com/web/fundamentals/design-and-ux/responsive/)

## 9. 実装例

### 9.1 レスポンシブカード

```html
<div class="card mb-3">
  <div class="card-header d-flex justify-content-between align-items-center">
    <h5 class="card-title mb-0">案件情報</h5>
    <div class="d-none d-md-block">
      <!-- デスクトップのみ表示されるボタン群 -->
      <button class="btn btn-sm btn-outline-primary me-2">詳細</button>
      <button class="btn btn-sm btn-primary">編集</button>
    </div>
    <div class="d-md-none">
      <!-- モバイルのみ表示されるドロップダウン -->
      <div class="dropdown">
        <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
          <i class="bi bi-three-dots-vertical"></i>
        </button>
        <ul class="dropdown-menu dropdown-menu-end">
          <li><a class="dropdown-item" href="#">詳細</a></li>
          <li><a class="dropdown-item" href="#">編集</a></li>
        </ul>
      </div>
    </div>
  </div>
  <div class="card-body">
    <div class="row g-3">
      <div class="col-md-6 col-12">
        <div class="mb-2">
          <strong class="text-muted">案件ID:</strong>
          <span>PRJ-2023-001</span>
        </div>
        <div class="mb-2">
          <strong class="text-muted">案件名:</strong>
          <span>基幹システムリプレイス</span>
        </div>
      </div>
      <div class="col-md-6 col-12">
        <div class="mb-2">
          <strong class="text-muted">ステータス:</strong>
          <span class="badge bg-success">受注済</span>
        </div>
        <div class="mb-2">
          <strong class="text-muted">期間:</strong>
          <span>2023/10/01 - 2024/03/31</span>
        </div>
      </div>
    </div>
  </div>
  <div class="card-footer">
    <div class="d-flex justify-content-between align-items-center">
      <small class="text-muted">最終更新: 2023/09/15</small>
      <div class="d-md-none">
        <!-- モバイルのみ表示されるアクションボタン -->
        <button class="btn btn-primary btn-sm">アクション</button>
      </div>
    </div>
  </div>
</div>
```

### 9.2 レスポンシブテーブル

```html
<div class="table-responsive">
  <table class="table align-middle">
    <thead>
      <tr>
        <th>ID</th>
        <th>名前</th>
        <th class="d-none d-md-table-cell">メール</th>
        <th class="d-none d-md-table-cell">電話番号</th>
        <th class="d-none d-lg-table-cell">登録日</th>
        <th>操作</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>001</td>
        <td>山田太郎</td>
        <td class="d-none d-md-table-cell">yamada@example.com</td>
        <td class="d-none d-md-table-cell">090-1234-5678</td>
        <td class="d-none d-lg-table-cell">2023/08/01</td>
        <td>
          <div class="d-flex gap-2">
            <button class="btn btn-sm btn-outline-primary d-none d-md-inline-block">詳細</button>
            <button class="btn btn-sm btn-primary d-none d-md-inline-block">編集</button>
            <div class="dropdown d-md-none">
              <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                <i class="bi bi-three-dots-vertical"></i>
              </button>
              <ul class="dropdown-menu dropdown-menu-end">
                <li><a class="dropdown-item" href="#">詳細</a></li>
                <li><a class="dropdown-item" href="#">編集</a></li>
                <li><a class="dropdown-item" href="#">削除</a></li>
              </ul>
            </div>
          </div>
        </td>
      </tr>
      <!-- 他の行も同様に -->
    </tbody>
  </table>
</div>

<!-- モバイル用のカードビュー（テーブルの代替表示） -->
<div class="d-md-none">
  <div class="card mb-3">
    <div class="card-body">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <h6 class="mb-0">山田太郎</h6>
        <span class="badge bg-primary">ID: 001</span>
      </div>
      <div class="mb-2">
        <strong class="text-muted">メール:</strong>
        <span>yamada@example.com</span>
      </div>
      <div class="mb-2">
        <strong class="text-muted">電話番号:</strong>
        <span>090-1234-5678</span>
      </div>
      <div class="d-flex justify-content-end gap-2 mt-3">
        <button class="btn btn-sm btn-outline-primary">詳細</button>
        <button class="btn btn-sm btn-primary">編集</button>
      </div>
    </div>
  </div>
  <!-- 他のカードも同様に -->
</div>
```