# マッチング機能モジュール - 概要

## 1. モジュールの目的

マッチング機能モジュールは、SES業務システムの中核機能として、案件と技術者のマッチングを効率的に行うための機能を提供します。案件要件と技術者スキルの相関分析、類似度スコアリング、提案管理といった機能を通じて、最適な案件-技術者のマッチングを実現します。

このモジュールの主な目的は以下の通りです：

- 案件要件に最適な技術者を客観的な指標で評価・抽出する
- 技術者に最適な案件を推薦する
- マッチングプロセスの効率化と成約率の向上
- データに基づく意思決定支援
- マッチング履歴の蓄積と分析による継続的な改善

## 2. 主要機能

### 2.1 案件-技術者マッチング検索

- 案件に対する技術者マッチング検索
- 技術者に対する案件マッチング検索
- マルチファクターによるフィルタリング（スキル、経験年数、稼働状況、勤務地など）
- マッチングスコアに基づくソート
- お気に入り管理
- 検索条件の保存・再利用

### 2.2 マッチングスコア算出

- 複数評価軸（スキル、経験年数、稼働状況、勤務地）での重み付けスコアリング
- カテゴリ別スコア詳細表示
- スコアの視覚化・グラフ表示
- 時系列でのスコア変化追跡

### 2.3 マッチング候補の管理

- マッチング結果の一時保存
- お気に入り管理
- メモ・コメント機能
- 候補者比較機能

### 2.4 提案管理

- 提案書作成・管理
- 提案状態管理（下書き、提出済、検討中、承認、却下、取消）
- 提案履歴管理
- 顧客からのフィードバック管理

### 2.5 マッチング履歴管理

- 過去のマッチングデータ分析
- 成約率の追跡
- マッチング傾向の分析
- レポート生成

### 2.6 アルゴリズムベースの候補者推薦

- 案件に対する自動推薦
- 技術者に対する案件推薦
- 協調フィルタリングによる類似案件・技術者の推薦
- 過去の成約パターンに基づく推薦

## 3. ユースケース

### 3.1 マッチング担当者が案件に適した技術者を検索する

1. マッチング担当者が案件詳細から「技術者マッチング」機能を選択
2. システムは案件要件（スキル、経験年数など）を抽出
3. 検索条件（勤務地、単価など）を追加で指定
4. システムが技術者データベースから条件に合致する技術者をスコア順に表示
5. マッチング担当者は結果リストからお気に入り登録や提案作成を実行

### 3.2 営業担当者が技術者に適した案件を検索する

1. 営業担当者が技術者詳細から「案件マッチング」機能を選択
2. システムは技術者スキルや経験を抽出
3. 検索条件（希望勤務地、単価など）を追加で指定
4. システムが案件データベースから条件に合致する案件をスコア順に表示
5. 営業担当者は結果リストからお気に入り登録や顧客へのアプローチを実行

### 3.3 技術者のスキルと案件要件の適合度を評価する

1. ユーザーがマッチング詳細画面を表示
2. システムはカテゴリ別（スキル、経験年数、稼働状況、勤務地）のスコア内訳を表示
3. 特に低いスコア項目があれば強調表示
4. ユーザーはスコア計算根拠を確認し、マッチング妥当性を判断

### 3.4 提案書を作成・管理する

1. ユーザーがマッチング結果から「提案作成」を選択
2. システムは案件・技術者データから提案書の初期データを生成
3. ユーザーが必要に応じて提案内容を編集
4. 提案書を保存または顧客に送信
5. 提案状態の変更を記録・管理

### 3.5 マッチング成立率を分析する

1. 管理者がマッチング分析レポート画面にアクセス
2. システムが期間、案件種別、技術者カテゴリなどの分析軸を提示
3. 管理者が分析条件を選択
4. システムが条件に基づくマッチング成立率や傾向を視覚化して表示
5. 分析結果をエクスポートまたは定期レポート設定

## 4. システム連携

### 4.1 他モジュールとの連携

![マッチングモジュール連携図](../../../resources/images/matching_module_integration.png)

| 連携モジュール | 入力データ | 出力データ | 連携方式 |
|--------------|------------|------------|---------|
| 技術者管理 | 技術者情報、スキル情報、稼働状況 | 技術者のマッチング推奨案件情報 | 内部API |
| 案件管理 | 案件情報、要件情報 | 案件のマッチング推奨技術者情報 | 内部API |
| 契約管理 | - | 提案情報、マッチング情報 | 内部API |
| レポーティング | - | マッチング統計、成約率データ | 内部API |

### 4.2 外部システム連携

現段階では外部システムとの直接連携は予定していません。将来的に以下の連携が検討される可能性があります：

- 人材データベースサービスとの連携
- 求人サイトAPIの活用
- AIベースのマッチング外部サービスとの連携

## 5. 非機能要件

### 5.1 性能要件

- マッチング検索応答時間：3秒以内（通常検索）
- バッチマッチング処理：1案件あたり最大1分以内
- 同時ユーザー数：最大50ユーザー

### 5.2 可用性要件

- サービス稼働率：99.5%以上
- 障害復旧時間：4時間以内

### 5.3 セキュリティ要件

- マッチングデータへのアクセス権限管理
- マッチングスコアアルゴリズムの保護
- 個人情報を含むマッチングデータの暗号化

### 5.4 運用要件

- マッチングアルゴリズムパラメータの定期的最適化
- 日次バッチマッチング処理
- 月次マッチング成立率レポート生成

## 6. アーキテクチャ設計

マッチングモジュールは、全体アーキテクチャに準拠した4層構造で設計します。マッチングアルゴリズムはドメイン層のサービスとして実装します。

### 6.1 コンポーネント構成

```
jp.co.system_engineer_service.matching
├── presentation
│   ├── controller
│   │   ├── MatchingController.java （Web向けコントローラ）
│   │   └── MatchingRestController.java （REST API向けコントローラ）
│   └── dto
│       ├── MatchingSearchDTO.java （検索条件用DTO）
│       ├── MatchingResultDTO.java （マッチング結果DTO）
│       └── ProposalDTO.java （提案用DTO）
├── application
│   ├── service
│   │   ├── MatchingService.java （インターフェース）
│   │   └── MatchingServiceImpl.java（実装クラス）
│   └── mapper
│       ├── MatchingMapper.java （DTO⇔エンティティ変換）
│       └── ProposalMapper.java （提案DTO変換）
├── domain
│   ├── model
│   │   ├── MatchingResult.java （マッチング結果エンティティ）
│   │   ├── MatchingScore.java （スコア計算用値オブジェクト）
│   │   ├── Proposal.java （提案エンティティ）
│   │   └── ProposalStatus.java （提案状態列挙型）
│   ├── repository
│   │   ├── MatchingResultRepository.java （結果リポジトリ）
│   │   └── ProposalRepository.java （提案リポジトリ）
│   └── service
│       ├── MatchingAlgorithmService.java （マッチングアルゴリズム）
│       └── ProposalDomainService.java （提案ドメインサービス）
└── infrastructure
    ├── repository
    │   ├── MatchingResultRepositoryImpl.java （結果リポジトリ実装）
    │   └── ProposalRepositoryImpl.java （提案リポジトリ実装）
    └── entity
        ├── MatchingResultEntity.java （マッチング結果DBエンティティ）
        └── ProposalEntity.java （提案DBエンティティ）
```

### 6.2 技術スタック

| コンポーネント | 使用技術 | バージョン |
|--------------|---------|----------|
| 言語 | Java | 21 |
| フレームワーク | Spring Boot | 3.2.x |
| データアクセス | Spring Data JDBC | 3.2.x |
| データベース | PostgreSQL | 17 |
| キャッシュ | Caffeine | 3.1.x |
| UI | Thymeleaf + Bootstrap | 3.1.x + 5.2.x |
| テスト | JUnit Jupiter + Mockito | 5.10.x + 5.4.x |

## 7. 将来的な拡張性

- AIベースのマッチングアルゴリズム強化
- 自然言語処理による要件・スキル抽出の自動化
- 機械学習モデルによるマッチング精度向上
- 技術トレンド分析との連携
- プロジェクト実績データの活用