# 案件管理モジュール - 概要

## 1. モジュールの目的

案件管理モジュールは、SES業務システムにおける案件（プロジェクト）情報を一元管理するコアモジュールです。顧客企業からの要求に基づく案件情報を登録・管理し、案件のライフサイクル全体を通じた状態管理を行います。このモジュールは、マッチング、契約管理、請求管理など他の業務モジュールの基盤となる情報を提供します。

## 2. 主要機能

案件管理モジュールが提供する主要機能は以下の通りです：

### 2.1 案件基本情報管理

- 案件の新規登録機能
- 案件情報の参照・更新機能
- 案件情報の削除（論理削除）機能
- 案件コードの自動生成

### 2.2 案件検索・フィルタリング

- 複合条件による案件検索
- キーワード検索（案件名、概要）
- ステータス、種別、顧客、期間などによるフィルタリング
- ソート機能（開始日、更新日など）
- ページング処理

### 2.3 案件ステータス管理

- 案件ステータスの更新
- ステータス遷移のバリデーション
- ステータス変更履歴の管理
- ステータスに応じた画面表示・操作制御

### 2.4 関連情報連携

- 技術者情報との連携（必要スキル、アサイン情報）
- 契約情報との連携（契約状況、契約期間）
- 請求情報との連携（予算、実績）
- レポーティングデータの提供

## 3. ユースケース

案件管理モジュールの主要なユースケースは以下の通りです：

### 3.1 営業担当者のユースケース

- 新規案件の登録：顧客から依頼された案件情報を登録する
- 案件情報の更新：案件の詳細情報や状況を更新する
- 案件ステータスの変更：案件の進捗に応じてステータスを更新する
- 案件検索：担当する案件を検索・参照する

### 3.2 マネージャーのユースケース

- 案件一覧の参照：全体の案件状況を把握する
- 案件詳細の確認：個別案件の詳細情報を参照する
- 案件レポートの確認：案件の集計・分析情報を参照する

### 3.3 マッチング担当者のユースケース

- 案件要件の確認：技術者マッチングのための要件情報を参照する
- 案件検索：マッチング可能な案件を検索する
- 案件状況の更新：マッチング状況に応じて案件ステータスを更新する

### 3.4 管理者のユースケース

- 全案件の管理：システム全体の案件を管理・監視する
- マスターデータ管理：案件関連のマスターデータを管理する
- 統計情報の参照：案件に関する統計・分析情報を参照する

## 4. アーキテクチャ設計

案件管理モジュールは、全体アーキテクチャに準拠した4層構造で設計します。

### 4.1 全体構造

案件管理モジュールは、SES業務システムの全体アーキテクチャに従い、以下の層で構成されます：

- **プレゼンテーション層**：ユーザーインターフェースとリクエスト処理
- **アプリケーション層**：ユースケース実現とサービス調整
- **ドメイン層**：ビジネスロジックとドメインルール
- **インフラストラクチャ層**：データアクセスと外部システム連携

### 4.2 コンポーネント構成

```
jp.co.system_engineer_service.project
├── presentation
│   ├── controller
│   │   ├── ProjectController.java （Web向けコントローラ）
│   │   └── ProjectRestController.java （REST API向けコントローラ）
│   └── dto
│       ├── ProjectDTO.java （画面表示用DTO）
│       ├── ProjectSearchDTO.java （検索条件用DTO）
│       └── ProjectDetailDTO.java （詳細表示用DTO）
├── application
│   ├── service
│   │   ├── ProjectService.java （インターフェース）
│   │   └── ProjectServiceImpl.java（実装クラス）
│   └── mapper
│       └── ProjectMapper.java （DTO⇔エンティティ変換）
├── domain
│   ├── model
│   │   ├── Project.java （案件エンティティ）
│   │   ├── ProjectStatus.java （案件ステータス列挙型）
│   │   └── ProjectType.java （案件種別列挙型）
│   ├── repository
│   │   └── ProjectRepository.java （リポジトリインターフェース）
│   └── service
│       └── ProjectDomainService.java （ドメインサービス）
└── infrastructure
    ├── repository
    │   └── ProjectRepositoryImpl.java （リポジトリ実装）
    └── entity
        └── ProjectEntity.java （DBエンティティ）
```

### 4.3 依存関係

モジュール内の依存関係は以下のようになります：

- プレゼンテーション層 → アプリケーション層 → ドメイン層 ← インフラストラクチャ層

依存の方向は基本的に内側（ドメイン層）に向かいます。外側の層から内側の層を参照することは可能ですが、内側の層が外側の層に依存することは避けます。インフラストラクチャ層はドメイン層のインターフェースに依存し、実装を提供します。

### 4.4 外部モジュールとの連携

案件管理モジュールは、以下の外部モジュールと連携します：

- **技術者管理モジュール**：技術者情報の参照、スキル要件の連携
- **マッチングモジュール**：案件-技術者マッチングのための情報提供
- **契約管理モジュール**：契約情報の連携、契約状態の反映
- **請求管理モジュール**：請求情報の連携、予算・実績管理
- **レポーティングモジュール**：集計・分析データの提供

## 5. 技術スタック

案件管理モジュールは、SES業務システム全体のテクノロジースタックに準拠し、以下の技術を使用します：

- **バックエンド**：Java 21, Spring Boot 3.2.x
- **データアクセス**：Spring Data JDBC
- **データベース**：PostgreSQL 17
- **API**：RESTful API (JSON)
- **認証・認可**：Spring Security, JWT
- **バリデーション**：Bean Validation (Jakarta Validation)
- **テスト**：JUnit 5, Mockito, Spring Boot Test

## 6. 制約条件と前提

- 案件情報は削除操作を行っても物理削除せず、論理削除とする
- 案件コードは一度生成したら変更不可
- 案件ステータスは定義されたステータス遷移ルールに従う
- 案件に関連する技術者情報は技術者管理モジュールから参照する
- 案件に関連する契約情報は契約管理モジュールから参照する