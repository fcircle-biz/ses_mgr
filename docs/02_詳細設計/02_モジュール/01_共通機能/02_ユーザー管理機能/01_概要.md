# ユーザー管理機能 - 概要

## 1. 目的と責務

ユーザー管理機能は、SES業務システム全体のユーザーアカウント、ロール、権限を集中管理する基盤的な共通機能です。本機能は以下の責務を担います：

- システム利用者のユーザーアカウント作成・編集・無効化
- ロールの定義と権限の設定
- ユーザーへのロール割り当て
- 組織階層と所属関係の管理
- アカウントセキュリティ管理（パスワードリセット、アカウントロック解除など）

## 2. 主要機能

ユーザー管理機能は以下のサブ機能で構成されます：

### 2.1 ユーザーアカウント管理

- ユーザーの新規登録・編集・無効化
- ユーザープロファイル情報の管理
- アカウントステータス管理（有効/無効/ロック中）
- ユーザー検索・一覧表示
- パスワード管理（リセット、期限設定）
- 多要素認証設定

### 2.2 ロール管理

- ロールの定義・編集・削除
- ロール階層の管理（システムロール/業務ロール）
- プリセットロールの提供と管理
- ロール検索・一覧表示
- ロール複製

### 2.3 権限管理

- 権限の定義と分類
- 権限グループの階層構造管理
- ロールへの権限割り当て
- アクセスレベル（なし/閲覧/編集）の設定

### 2.4 ユーザー・ロール関連付け

- ユーザーへのロール割り当て・削除
- 一時的なロール付与（期限付き権限）
- ロール割り当て履歴の記録と表示
- 一括ロール割り当て

## 3. システム内の位置づけ

ユーザー管理機能は、以下の点でシステム全体の基盤となる重要な位置づけを持ちます：

- **認証認可機能との連携**: 認証認可機能が利用するユーザー情報とアクセス権限の管理
- **各業務モジュールの前提**: 全ての業務モジュールはユーザー管理機能が提供するユーザー情報とロール・権限を利用
- **運用管理の基盤**: システム管理者がユーザーとアクセス権限を一元管理するための機能を提供

## 4. ユースケース一覧

### 4.1 システム管理者のユースケース

- UC-USER-001: ユーザーを新規登録する
- UC-USER-002: ユーザー情報を編集する
- UC-USER-003: ユーザーを検索・一覧表示する
- UC-USER-004: ユーザーのステータスを変更する（有効化/無効化）
- UC-USER-005: ユーザーのパスワードをリセットする
- UC-USER-006: ユーザーのアカウントロックを解除する
- UC-USER-007: ユーザーに複数のロールを割り当てる
- UC-USER-008: ユーザーからロールを削除する

### 4.2 セキュリティ管理者のユースケース

- UC-ROLE-001: 新しいロールを作成する
- UC-ROLE-002: 既存のロールを編集する
- UC-ROLE-003: ロールを削除する
- UC-ROLE-004: ロールに権限を割り当てる
- UC-ROLE-005: 既存のロールを複製して新しいロールを作成する
- UC-ROLE-006: ロールに割り当てられたユーザー一覧を表示する

### 4.3 一般ユーザーのユースケース

- UC-PROFILE-001: 自分のプロファイル情報を閲覧する
- UC-PROFILE-002: 自分のプロファイル情報を編集する
- UC-PROFILE-003: 自分のパスワードを変更する
- UC-PROFILE-004: 多要素認証を設定する

## 5. 外部システム連携

ユーザー管理機能は、以下の外部システムと連携します：

### 5.1 メール送信システム

- パスワードリセット時の通知メール送信
- アカウント作成時の初期パスワード通知
- アカウントロック時の通知

### 5.2 監査ログシステム

- セキュリティに関わる操作（ロール割り当て、権限変更など）の監査ログ記録
- アカウントロック・ロック解除・パスワードリセットなどのセキュリティイベント記録

### 5.3 組織管理システム（オプション）

- 外部の組織管理システムと連携した部門・組織情報の同期
- 組織変更に連動したロール・権限の自動調整